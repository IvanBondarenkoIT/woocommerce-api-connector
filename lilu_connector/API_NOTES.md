# üìù –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –∏–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ LILU API

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ú–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: `X-Leeloo-AuthToken`
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: API —Å–µ–∫—Ä–µ—Ç (–∏–∑ `LILU_API_SECRET`)
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –ü–∞—Ä–∞–º–µ—Ç—Ä `authToken` –≤ query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∑–∞–ø—Ä–æ—Å–∞

### –ü—Ä–∏–º–µ—Ä
```http
GET https://api.leeloo.ai/api/v2/people?limit=20&offset=0&authToken=YOUR_SECRET
Headers:
  X-Leeloo-AuthToken: YOUR_SECRET
```

---

## üë• –†–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ (People/–ü–æ–¥–ø–∏—Å—á–∏–∫–∏)

### –í–∞–∂–Ω–æ!
–í LILU API –∫–ª–∏–µ–Ω—Ç—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **"people"** (–ø–æ–¥–ø–∏—Å—á–∏–∫–∏), –∞ –Ω–µ "clients".

### Endpoints
- **–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫**: `GET /api/v2/people`
- **–ü–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ–≥–æ**: `GET /api/v2/people/{id}`
- **–°–æ–∑–¥–∞—Ç—å**: `POST /api/v2/people`

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è
LILU API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **offset/limit**, –∞ –Ω–µ page/limit:
- `offset` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (0, 50, 100, ...)
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20, –º–∞–∫—Å–∏–º—É–º 100)

**–§–æ—Ä–º—É–ª–∞**: `offset = (page - 1) * limit`

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞
```http
GET /api/v2/people?limit=50&offset=0&authToken=YOUR_SECRET
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞
```json
{
  "data": [
    {
      "id": "69660055fb13db648fc58795",
      "name": "–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞",
      "phone": "+79991234567",
      "email": "email@example.com",
      "tags": ["tag1", "tag2"],
      "accounts": [
        {
          "account_id": "69660055fb13db648fc58796",
          "connection_id": "66fbb5cb225b7173bad725db",
          "connection_status": "OK",
          "from": "FACEBOOK"
        }
      ],
      "lastMessageTime": "2026-01-13T08:21:09.619Z",
      "createdAt": "2026-01-13T08:20:37.508Z"
    }
  ],
  "meta": {
    "limit": 50,
    "offset": 0,
    "filteredCount": 50,
    "totalCount": 5607
  },
  "status": 1
}
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞
1. **ID** - —Å—Ç—Ä–æ–∫–∞ (–Ω–µ —á–∏—Å–ª–æ), —Ñ–æ—Ä–º–∞—Ç MongoDB ObjectId
2. **Email –∏ Phone** - –º–æ–≥—É—Ç –±—ã—Ç—å `"NOT_DEFINED"` –≤–º–µ—Å—Ç–æ `null`
3. **Tags** - –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ —Å —Ç–µ–≥–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–∞
4. **Accounts** - –º–∞—Å—Å–∏–≤ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
5. **Connection Status** - —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (`"OK"`, `"ERROR"`, –∏ —Ç.–¥.)
6. **Last Message Time** - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (ISO 8601)

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä—ã –≤ query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö:
- `filter[tags]=tag1&filter[tags]=tag2` - –ø–æ —Ç–µ–≥–∞–º
- `filter[last_message][from]=2015-04-02` - —Å –¥–∞—Ç—ã
- `filter[last_message][to]=2015-04-03` - –¥–æ –¥–∞—Ç—ã
- `filter[phone]=+380966565556` - –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- `filter[email]=feliks@gmail.com` - –ø–æ email

### –ü—Ä–∏–º–µ—Ä —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
```http
GET /api/v2/people?limit=20&offset=100&filter[tags]=vip&filter[tags]=tag2&filter[last_message][from]=2015-04-02&filter[last_message][to]=2015-04-03&filter[phone]=+380966565556&filter[email]=feliks@gmail.com&authToken=YOUR_SECRET
```

---

## üìã –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π

### Endpoint
- **–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫**: `GET /api/v2/categories/templates`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞
```json
{
  "data": {
    "categories": [
      {
        "id": "67f8b9747bec06a21e8e41c0",
        "name": "New category"
      },
      {
        "id": "66f55c440a4b6fea692dd583",
        "name": "New Block"
      }
    ]
  },
  "status": 1
}
```

---

## üîß –û–±—â–∏–µ –º–æ–º–µ–Ω—Ç—ã

### –ë–∞–∑–æ–≤—ã–π URL
```
https://api.leeloo.ai/api/v2
```

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞
–í—Å–µ —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç:
- `data` - –¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–æ–º, –º–∞—Å—Å–∏–≤–æ–º –∏–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π)
- `status` - —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ (1 = —É—Å–ø–µ—Ö, 0 = –æ—à–∏–±–∫–∞)
- `meta` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–¥–ª—è —Å–ø–∏—Å–∫–æ–≤: limit, offset, totalCount, filteredCount)

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–ü—Ä–∏ –æ—à–∏–±–∫–µ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "status": 0,
  "error": {
    "fields": {
      "authToken": "REQUIRED"
    },
    "code": "FORMAT_ERROR"
  }
}
```

### –ö–æ–¥—ã –æ—à–∏–±–æ–∫
- `FORMAT_ERROR` - –æ—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- `REQUIRED` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- `404` - —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `401` - –æ—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://leelooai.atlassian.net/wiki/spaces/DOC/pages/3793649959
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: https://web.leeloo.ai/adaptation
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–±—É—á–µ–Ω–∏–µ**: https://support.leeloo.ai/

---

## üí° –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞** - API –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:
   - `{data: [...]}` - —Å–ø–∏—Å–æ–∫
   - `{data: {people: [...]}}` - –≤–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
   - `{data: {...}}` - –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç

2. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ "NOT_DEFINED"** - —ç—Ç–æ –Ω–µ `null`, –∞ —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ

3. **ID - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∏** - –Ω–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –≤ —á–∏—Å–ª–∞

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ offset, –∞ –Ω–µ page** - –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ offset/limit

5. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ connection_status** - –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `accounts[].connection_status == "OK"`

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏—Ö API

–ï—Å–ª–∏ –≤—ã –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ —Å –¥—Ä—É–≥–æ–≥–æ API –Ω–∞ LILU:

| –°—Ç–∞—Ä–æ–µ API | LILU API |
|------------|----------|
| `/clients` | `/people` |
| `page=1` | `offset=0` |
| `id: 123` | `id: "69660055fb13db648fc58795"` |
| `status: "active"` | `accounts[].connection_status: "OK"` |
| `email: null` | `email: "NOT_DEFINED"` –∏–ª–∏ `null` |

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
```python
from lilu_connector import LILUConnector

connector = LILUConnector()

# –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (50 –∫–ª–∏–µ–Ω—Ç–æ–≤)
clients = connector.get_clients(page=1, limit=50)

# –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
clients = connector.get_clients(page=2, limit=50)
```

### –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
```python
new_client = connector.create_client({
    'name': 'John Doe',
    'email': 'john@example.com',
    'phone': '+1234567890',
    'tags': ['vip', 'important']
})
```

### –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤
```python
categories = connector.get_template_categories()
for category in categories:
    print(f"{category['name']} (ID: {category['id']})")
```

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-01-13*
